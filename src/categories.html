<!DOCTYPE html>
<html>
  <head>
    <title>Library Management Page</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" type="text/css" href="../style.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@600&display=swap"
      rel="stylesheet"
    />
  </head>
  <body id="filterb">
    <!--Filter Page for filtering the Book list-->
    <header>
      <a href="../index.html" class="brand">Library</a>
      <div class="navigation">
        <div class="navi-items">
          <a href="#" id="logout" style="display: block">Log Out</a>
          <!--It also has the Logout functionality-->
        </div>
      </div>
    </header>
    <section class="filter">
      <div class="container">
        <h1 class="text-center">Search</h1>

        <div id="filters">
          <h2>Filters</h2>
          <div class="row">
            <div class="col-md-3 mb-2">
              <input
                type="text"
                class="form-control"
                id="title-filter"
                placeholder="Title"
              />
              <small>Total: <span id="title-count">0</span></small>
            </div>
            <div class="col-md-3 mb-2">
              <input
                type="text"
                class="form-control"
                id="author-filter"
                placeholder="Author"
              />
              <small>Total: <span id="author-count">0</span></small>
            </div>
            <div class="col-md-3 mb-2">
              <input
                type="text"
                class="form-control"
                id="subject-filter"
                placeholder="Subject"
              />
              <small>Total: <span id="subject-count">0</span></small>
            </div>
            <div class="col-md-3 mb-2">
              <input
                type="text"
                class="form-control"
                id="date-filter"
                placeholder="Publish Date"
              />
              <small>Total: <span id="publish-date-count">0</span></small>
            </div>
          </div>
          <button class="btn btn-primary mt-2" onclick="filter()">
            Apply Filters
          </button>
          <br />
          <div class="row" style="margin-top: 10px">
            <div class="col-md-3 mb-2">
              <input
                type="text"
                class="form-control"
                id="reqTitle"
                placeholder="Title"
              />
            </div>
            <div class="col-md-3 mb-2">
              <input
                type="text"
                class="form-control"
                id="reqAuthor"
                placeholder="Author"
              />
            </div>
          </div>
          <button class="btn btn-primary" onclick="Request()">
            Request Book
          </button>
        </div>
        <div
          id="req"
          style="
            background: white;
            color: black;
            border-radius: 20px;
            padding: 10px;
          "
        ></div>

        <div id="book-list">
          <h2>Book List</h2>
          <table class="table">
            <thead class="thead-light">
              <tr>
                <th>Title</th>
                <th>Author</th>
                <th>Subject</th>
                <th>Publish Date</th>
                <th>ISBN</th>
              </tr>
            </thead>
            <tbody style="border-radius: 10px" id="book-table-body"></tbody>
          </table>
          <div id="load"></div>
          <div id="pagination"></div>
        </div>
      </div>
    </section>
    <script type="module">
      import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.10.0/firebase-app.js';
      import {
        getAuth,
        createUserWithEmailAndPassword,
        signInWithEmailAndPassword,
        signOut,
      } from 'https://www.gstatic.com/firebasejs/9.10.0/firebase-auth.js';

      const firebaseConfig = {
        apiKey: 'AIzaSyAuFxM8gZqY5AS1nsB2cejqBViYi3CLXBw',
        authDomain: 'libmanauth.firebaseapp.com',
        projectId: 'libmanauth',
        storageBucket: 'libmanauth.appspot.com',
        messagingSenderId: '286408570951',
        appId: '1:286408570951:web:79ecc24e8f90305cb4d962',
      };

      const app = initializeApp(firebaseConfig);
      const auth = getAuth();
      console.log(app);
      //function for logging out of the system
      document.getElementById('logout').addEventListener('click', function () {
        signOut(auth)
          .then(() => {
            console.log('Sign-out successful.');
            alert('Sign-out successful.');
            document.getElementById('logout').style.display = 'none';
            window.location.href = '../index.html'; //after logging out, you will be redirected to home page
          })
          .catch((error) => {
            console.log('An error happened.');
          });
      });
    </script>
    <script src="script1.js"></script>
  </body>
</html>
