<!DOCTYPE html>
<html>
  <head>
    <title>Library Management System</title>
    <link rel="stylesheet" href="Login.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM"
      crossorigin="anonymous"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@600&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <!--Login Page-->
    <header>
      <a href="../index.html" class="brand">Library</a>
      <div class="navigation">
        <div class="navi-items">
          <a href="../index.html">Home</a>
        </div>
      </div>
    </header>
    <div class="login">
      <form
        name="login_form"
        id="login_form"
        method="post"
        action="#"
        enctype="multipart/form-data"
      >
        <div>
          <div class="form-group">
            <h1 class="text-center">Sign-In</h1>
            <label for="email">Email</label>
            <input
              type="text"
              name="login_email"
              id="login_email"
              class="form-control"
              placeholder="Enter your email"
            />
          </div>

          <div class="form-group mb-3 mt-3">
            <label for="password">Password</label>
            <input
              type="password"
              name="login_password"
              id="login_password"
              class="form-control"
              placeholder="Enter your password"
            />
          </div>
          <button type="button" id="login" name="login" class="btn btn-success">
            Login
          </button>
        </div>
      </form>
    </div>
    <script type="module">
      //Script for Login
      import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.10.0/firebase-app.js';
      import {
        getAuth,
        createUserWithEmailAndPassword,
        signInWithEmailAndPassword,
        signOut,
      } from 'https://www.gstatic.com/firebasejs/9.10.0/firebase-auth.js';
      const firebaseConfig = {
        apiKey: 'AIzaSyAuFxM8gZqY5AS1nsB2cejqBViYi3CLXBw',
        authDomain: 'libmanauth.firebaseapp.com',
        projectId: 'libmanauth',
        storageBucket: 'libmanauth.appspot.com',
        messagingSenderId: '286408570951',
        appId: '1:286408570951:web:79ecc24e8f90305cb4d962',
      };

      const app = initializeApp(firebaseConfig);
      const auth = getAuth();
      console.log(app);

      //Function for Signing in into the system
      document.getElementById('login').addEventListener('click', function () {
        var email = document.getElementById('login_email').value;
        var password = document.getElementById('login_password').value;

        signInWithEmailAndPassword(auth, email, password)
          .then((userCredential) => {
            const user = userCredential.user;
            console.log(user);
            alert(user.email + ' Login successfully!!!');
            window.location.href = 'categories.html'; //After logging up you will be redirected to categories page
          })
          .catch((error) => {
            const errorCode = error.code;
            const errorMessage = error.message;
            console.log(errorMessage);
            alert(errorMessage);
          });
      });
    </script>
  </body>
</html>
